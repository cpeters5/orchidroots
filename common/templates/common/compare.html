{% load static %}
<head>
    <title>Comparing two different species and/or hybrids of {{genus}}</title>
</head>
{% include "base.html" %}
{% block body %}

<style>

div.text-br {
    position: absolute;
    bottom: 2px;
    right: 6px;
    font-size:13px;
}

        /*Display square image*/
.imageitem {
    display:inline-block;
    margin:5px;
    width : 16vw;
    /*height : 22vw;*/
    background-color: #eaeaea;
    border:1px solid lightgrey;
    text-align:center;
}

.box {
    position: relative;
    display: inline-block;
    /*text-align: left;*/
    color: white;
    margin: 4px 0;
}


.thumbnails {
   object-fit: cover;
   overflow: hidden;
   height: 15vw;
   width : 15vw;
   /*padding:2px;*/
   padding:2px 1px 3px 1px;
}
.imgcaption {
    font-size: 10px;
    height: 45px;
    overflow: hidden;
}

.subtitle {
    text-align:center;
    margin-top: 10px;
    font-size:15px;
    border:0 solid green;
    padding:10px;
    height:50px;
}

.title {
    margin:0 auto;
    padding:10px;
    text-align: center;
    border:0 solid blue;
}
input[type=text] {
  width: 100%;
  padding: 12px 20px;
  margin: 4px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 2px;
  box-sizing: border-box;
}

@media only screen and (max-width: 850px) {
    div.text-br {
        font-size:10px;
    }
    .thumbnails {
       height: 20vw;
       width : 20vw;
       padding:2px 1px 3px 1px;
    }
    .imageitem {
        width : 22vw;
       /*height: 28px;*/
    }
    .imgcaption {
        font-size: 10px;
        height: 40px;
        overflow: hidden;
    }
    .subtitle {
        font-size:12px;
    }
    .title {
        font-size: 13px;
    }

}

@media only screen and (max-width: 600px) {
    div.text-br {
        font-size:9px;
    }
    .thumbnails {
       height: 25vw;
       width : 25vw;
       padding:2px 1px 3px 1px;
    }
    .imageitem {
        width : 27vw;
    }
    .imgcaption {
        margin: 0 auto;
        font-size: 10px;
        height: 32px;
        overflow: auto;
        width: 100%;
    }
    .subtitle {
        font-size:11px;
    }
    .title {
        font-size: 12px;
    }
    input[type=text], select {
        font-size:10px;
    }

}

</style>
    <br>
<div style="clear:both"></div>

<!--Title-->
<div class="detail-title" style="text-align:center">
     <h1 class="hidden-h1">
        {% if pid2 %}
            {% if pid != pid2 %}
                {{species.name|safe}} V.S. {{species2.name|safe}}
            {% else %}
                The two orchids are the identical or synonymous!
            {% endif %}
        {% else %}
            Comparing {{species.name|safe}} with ?
        {% endif %}
    </h1>
    <h5>
        {% if pid2 %}
            {% if pid != pid2 %}
                {{species.name|safe}} v.s. {{species2.name|safe}}
            {% else %}
                The two orchids are the identical or synonymous!
            {% endif %}
        {% else %}
            Comparing {{species.name|safe}} with ?
        {% endif %}
    </h5>
</div>

<!--Instruction-->
<div class="d-flex p-2 justify-content-center" style="width:100%; border:0 solid pink; margin:0 auto;">
    <div class="row justify-content-center align-items-center" style="border:0 solid blue;font-size:11px;">
        <button class="btn btn-xs btn-primary" type="button" data-toggle="collapse" data-target="#Announcement">Instruction</button>
        <div id="Announcement" class="collapse" style="padding:20px;">
            <h6>Warning: This page is still a prototype. Please report any error to <a href="https://m.facebook.com/groups/186576315397600/">OrchidRoots Support Group</a></h6>
            This page provides a mean to compare images of two species and or hybrids.
            <ul>
                <li>Enter each species in the forms below and click either "Go" buttons. The name entered must be correct! We may consider genus abreviation or partial matching of species name in a future update if needed.</li>
                <li>If a cross already registered (or temporary created in OrchidRoots) you will see the hybrid name at the top of the screen.  The name serves as the link to the detail page.</li>
                <li>If the cross has not been registered or creatred in OrchidRoots, a button to create it is provided.
                    <br><b>Please create this hybrid ONLY IF you have photos to upload</b></li>
            </ul>
        </div>
    </div>
</div>
<br>

{% include "common/detail-nav.html" %}
        <!--Main sections-->
    <div class="d-flex p-2 justify-content-center" style="margin:0 auto;width:95%;">
        <div class="tab-content clearfix" style="background:white; width:100%;">
                <!-- Results -->
                <div style="width:100%;margin: 0 auto; border:0 solid blue;">
                    <div class="title" style="margin:0 auto;padding:10px;text-align: center; border:0 solid blue;">
                        {% if cross %}
                            This cross has already been
                            {% if cross.pid.source == 'RHS' %}
                            registered at <a href="{{cross.pid.sourceurl}}" target="_blank">({{cross.pid.source}}</a>) -
                            {% else %}
                            temporarily created -
                            {% endif %}
                            <a href="{% url 'display:summary' species.family.application cross.pid_id %}">{{cross.binomial_it|safe}}</a>
                        {% else %}
                            {% if pid and pid2 and pid != pid2 %}
                                {% if synonym_message %}
                                    {% if species.status == 'synonym' and species2.status == 'synonym' %}
                                        This cross cannot be created. {{species.name|safe}} and {{species2.name|safe}} {{synonym_message}}
                                    {% else %}
                                        This cross cannot be created. {{species.name|safe}} and {{species2.name|safe}} are synonymous
                                    {% endif %}
                                {% elif failmsg %}
                                    <span style="color:red">{{message3}} : Nothogenus of type <b>{{species.genus}} x {{genus2}}</b> has not been formally defined! Emial request to
                                        admin@bluenanta.com.</span>
                                    <br>
                                {% else %}
                                    This cross "{{species.name|safe}} Ã— {{species2.name|safe}}" has not been registered. <br>
                                    Click on the blue button below to create this cross in OrchidRoots.
                                    Please only create it if you have photos ready to upload and share.<br>
                                    To maintain the quality and usefulness of the OrchidRoots database,
                                    any new hybrids without associated photos or offspring will be removed.<br>
                                    <a class="btn btn-primary btn-xs" href="{% url 'common:newcross' pid pid2 %}">
                                        Create new cross {{genus}} {{species.species}} x {{genus2}} {{species2.species}}
                                    </a>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    </div>
                    <div style="clear:both;"></div>
                </div>

                <!-- Compare -->

                <div class="d-flex justify-content-between" >
                    <div class="p-2" style="width:48%;">
                        <div style="padding:10px;">
                            {% if message1 %}
                                <span class="text-danger">{{message1|safe}}</span>
                            {% elif species %}
                            <h6>{{species.binomial_it|safe}}</h6>
                            {% else %}
                                Enter the correct name of the first orchid
                            {% endif %}
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{genus}}"/>
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{species.species}}"/>
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{species.infraspr|default_if_none:' '}}"/>
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{species.infraspe|default_if_none:' '}}"/>
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{species.author|default_if_none:' '}}"/>
                            <input type="text" disabled class="form-control form-control-sm" style="background-color:#eaeaea" value="{{species.year|default_if_none:' '}}"/>
                        </div>
                        <div class="d-flex justify-content-center" style="display:inline-block;text-align:center; boundary:0 solid blue;">
                            {% if species and not spcimg1_list %}
                                <div class="subtitle">
                                    No image available
                                </div>
                            {% else %}
                                {% for image in spcimg1_list %}
                                    {% if forloop.last %}
                                       <div class="d-none d-sm-block imageitem">
                                            <a href="/static/{{image.image_dir}}/{{image.image_file}}" data-lightbox="current" data-title="{{image.id}}: {{image.imgname}}">
                                                <div class="box">
                                                    <img class="thumbnails" alt="" src="/static/{{image.image_dir}}/{{image.image_file}}">
                                                    <div class="text-br">{{image.id}}</div>
                                                </div>
                                            </a>
                                            <div class="imgcaption" style="text-align: center;">
                                                {% if image.source_url %}
                                                    <a href="{{image.source_url}}" target="_blank">{{image.get_displayname}}</a>
                                                {% else %}
                                                    {{image.get_displayname}}
                                                {% endif %}
                                                {% if image.imginfo %}<br>{{image.imginfo|safe}}{% endif %}
                                            </div>
                                       </div>
                                    {% else %}
                                        <div class="imageitem">
                                            <a href="/static/{{image.image_dir}}/{{image.image_file}}" data-lightbox="current" data-title="{{image.id}}: {{image.imgname}}">
                                                <div class="box">
                                                    <img class="thumbnails" alt="" src="/static/{{image.image_dir}}/{{image.image_file}}">
                                                    <div class="text-br">{{image.id}}</div>
                                                </div>
                                            </a>
                                            <div class="imgcaption" style="text-align: center;">
                                                {% if image.source_url %}
                                                    <a href="{{image.source_url}}" target="_blank">{{image.get_displayname}}</a>
                                                {% else %}
                                                    {{image.get_displayname}}
                                                {% endif %}
                                                {% if image.imginfo %}<br>{{image.imginfo|safe}}{% endif %}
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor%}
                            {% endif %}
                        </div>
                    </div>
<!--                            <div class="col-1" style="padding:0; border:3px solid black"></div>-->
                    <div class="p-2" style="width:48%;">
                        <div style="padding:10px;">
                            <form action="?" id="compare">
                            <button form="compare" type="submit" class="btn btn-primary btn-sm" style="padding:0 20px; margin:0;">Go</button>
                            {% if message2 %}
                                <span class="text-danger">{{message2|safe}}</span>
                            {% else %}
                                Enter the correct name of second orchid.
                            {% endif %}
                            <input type="hidden" name="role" value="{{role}}">
                            <input type="hidden" name="pid" value="{{species.pid}}">
                            <input type="hidden" name="family" value="{{species.gen.family}}">
                            <input form="compare" type="text" class="form-control form-control-sm"  name="genus2" onfocus="this.select()" {% if genus2 %}value="{{genus2}}"{% else %} placeholder="Genus" {% endif %}>
                            <input form="compare" type="text" class="form-control form-control-sm"  name="species2" onfocus="this.select()" {% if genus2 %}value="{{species2.species}}"{% else %} placeholder="Species"{% endif %}>
                            <input form="compare" type="text" class="form-control form-control-sm"  name="infraspr2" onfocus="this.select()" {% if genus2 %}value="{{infraspr2|default_if_none:' '}}"{% else %} placeholder="infraspecific rank" {% endif %}>
                            <input form="compare" type="text" class="form-control form-control-sm"  name="infraspe2" onfocus="this.select()" {% if genus2 %}value="{{infraspe2|default_if_none:' '}}"{% else %} placeholder="infraspecific" {% endif %}>
                            <input form="compare" type="text" class="form-control form-control-sm"  name="author2" onfocus="this.select()" {% if genus2 %}value="{{author2|default_if_none:' '}}"{% else %} placeholder="Author" {% endif %}>
                            <input form="compare" type="text" class="form-control form-control-sm"  name="year2" onfocus="this.select()" {% if genus2 %}value="{{year2|default_if_none:' '}}"{% else %} placeholder="year" {% endif %}>
                            </form>
                        </div>
                        <div class="d-flex justify-content-center" style="display:inline-block;text-align:center">
                            {% if spc2 and not spcimg2_list %}
                                <div class="subtitle">
                                    No image available
                                </div>
                            {% else %}
                                {% for image in spcimg2_list %}
                                    {% if forloop.last %}
                                        <div class="d-none d-sm-block imageitem" style="display:inline-block; border:1px solid lightgrey;text-align:center;">
                                            <a href="/static/{{image.image_dir}}/{{image.image_file}}" data-lightbox="compare" data-title="{{image.id}}: {{image.imgname}}">
                                                <div class="box">
                                                    <img class="thumbnails" alt="" src="/static/{{image.image_dir}}/{{image.image_file}}">
                                                    <div class="text-br">{{image.id}}</div>
                                                </div>
                                            </a>
                                            <div class="imgcaption" style="text-align: center;">
                                                {% if image.source_url %}
                                                    <a href="{{image.source_url}}" target="_blank">{{image.get_displayname}}</a>
                                                {% else %}
                                                    {{image.get_displayname}}
                                                {% endif %}
                                                {% if image.imginfo %}<br>{{image.imginfo|safe}}{% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="imageitem" style="display:inline-block; border:1px solid lightgrey;text-align:center;">
                                            <a href="/static/{{image.image_dir}}/{{image.image_file}}" data-lightbox="compare" data-title="{{image.id}}: {{image.imgname}}">
                                                <div class="box">
                                                    <img class="thumbnails" alt="" src="/static/{{image.image_dir}}/{{image.image_file}}">
                                                    <div class="text-br">{{image.id}}</div>
                                                </div>
                                            </a>
                                            <div class="imgcaption" style="text-align: center;">
                                                {% if image.source_url %}
                                                    <a href="{{image.source_url}}" target="_blank">{{image.get_displayname}}</a>
                                                {% else %}
                                                    {{image.get_displayname}}
                                                {% endif %}
                                                {% if image.imginfo %}<br>{{image.imginfo|safe}}{% endif %}
                                            </div>
                                        </div>
                                   {% endif %}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                </div>
        </div>
    </div>



<!--<footer>Copyright &copy; OrchidRoots.com</footer>-->



{# TODO: Add sort image by - RANDOM, DISTANCE, DATE #}


<script type="text/javascript">

$(document).ready(function(){
    $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
        localStorage.setItem('activeTab', $(e.target).attr('href'));
    });
    var activeTab = localStorage.getItem('activeTab');
    if(activeTab){
        $('#myTab a[href="' + activeTab + '"]').tab('show');
    }
});

$(document).on('click', '[data-toggle="lightbox"]', function(event) {
                event.preventDefault();
                $(this).ekkoLightbox();
            });


// function myFunction() {
//   // Get the checkbox
//   var myCheck = document.querySelector('input[id="myCheck"]');
//   var btn_mysubmit = document.getElementById("mysubmit");
//   // Get the output text
//   var text = document.getElementById("text");
//
//   // If the checkbox is checked, display the output text
//   if (myCheck.checked == true){
//     btn_mysubmit.disabled  = false;
//   } else {
//     btn_mysubmit.disabled  = true;
//   }
// }
                        // function myFunction() {
                        //     var x = document.getElementById("myCheck").defaultChecked;
                        //     document.getElementById("demo").innerHTML = x;
                        // }

</script>



{% endblock %}



