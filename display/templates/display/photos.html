{% load static %}
{% include "base.html" %}
{% include "detail-title.html" %}
{% block body %}
<head>
    <link rel="canonical" href="{{ canonical_url }}">
    <title>{{species.binomial}} orchid photo gallery</title>
    <meta name='description' content="Browse the photo gallery of {{species.binomial}} ({{species.hybrid.registered_seed_name_long|default:'na'|safe}} x {{species.hybrid.registered_pollen_name_long|default:'na'|safe}})">.
</head>
<style>
    /*Styles for Top Descendants*/
[class*="col-"] {
    float: left;
    padding: 10px;
    margin-left: 15px;
    height: 100%;
}

.imageitem {
    display:inline-block;
    margin:2px;
    width : 17vw;
    height: 20vw;
    background-color: #f7f7f7;
    border:1px solid lightgrey;
    text-align:center;
}
.imageitem-cur {
    display:inline-block;
    margin:2px;
    width : 17vw;
    height: 24vw;
    background-color: #f7f7f7;
    border:1px solid lightgrey;
    text-align:center;
}

.box {
    position: relative;
    display: inline-block;
    text-align: center;
    color: white;
    margin: 0 auto;
    width:100%;
}
        /*Display square image*/
.thumbnails {
   object-fit: cover;
   overflow: hidden;
   height: 14vw;
   width : 14vw;
   padding:2px;
    margin:5px auto;
}

/*.thumbnail-tiny {*/
/*   object-fit: cover;*/
/*   overflow: hidden;*/
/*   height: 11vw;*/
/*   width : 11vw;*/
/*   padding:2px;*/
/*    margin:5px auto;*/
/*}*/

.imgcaption {
    font-size: 10px;
    text-align: center;
    /*height:60px;*/
    margin-top: -7px;
    /*overflow: hidden;*/
}
.imgcaption-cur {
    font-size: 10px;
    text-align: center;
    /*height:80px;*/
    margin-top: -7px;
    overflow: hidden;
    white-space: nowrap; /* Prevent text from wrapping */
    text-overflow: ellipsis; /* Add ellipsis if text overflows */
}

div.text {
    position: absolute;
    font-size:10px;
    color: white
}


div.text-br {
    position: absolute;
    bottom: 5px;
    right: 15px;
}

div.text-bl a {
    color: #2fffff;
}

.mybtn {
    font-size: 12px;
}

@media only screen and (max-width: 800px){
    .imageitem {
        width: 28vw;
        height: 36vw;
    }
    .imageitem-cur {
        width: 28vw;
        height: 40vw;
    }
    .imgcaption {
        font-size: 10px;
    }
    .imgcaption-cur {
        font-size: 9px;
    }
    .box {
        width: 27vw;
        height: 27vw;
        font-size: 10px;
        /*margin-left:-3px;*/
       margin: 0 auto;
    }
    .thumbnails {
       height: 26vw !important;
       width: 26vw !important;
    }
    /*.thumbnails {*/
    /*   height: 190px !important;*/
    /*   width : 95% !important;*/
    /*}*/
    div.text {
        font-size: 10px;
    }
}

@media only screen and (max-width: 500px){
    .imageitem {
        width: 36vw;
        height: 44vw;
    }
    .box {
        width: 34vw;
        height: 34vw;
        font-size: 10px;
        margin-left:-3px;
    }
    .thumbnails {
       height: 30vw !important;
       width: 30vw !important;
    }
    .imageitem-cur {
        width: 36vw;
        height: 56vw !important;
        padding:2px;
        margin:5px auto;
    }
    .box-tiny {
        width: 18vw;
        font-size: 9px;
        margin-left:-3px;
    }
    /*.thumbnail-tiny {*/
    /*    height: 15vw;*/
    /*    width : 15vw;*/
    /*    padding:2px;*/
    /*    margin:3px auto;*/

    /*}*/
    .imgcaption {
       width : 34vw;
        font-size: 9px;
        height: 59px;
    }
    .imgcaption-cur {
       width : 34vw;
        font-size: 9px;
        height: 62px;
    }
    div.text {
        font-size: 10px;
    }

    .mybtn {
        font-size: 11px !important;
    }
}

.clearfix:after {
    content: "";
    display: table;
    clear: both;
}

label {
    display: inline-block;
    width: 250px;
    margin-right: 5px;
}

.tab-content {
    min-height: 200px !important;
    background:white;
    padding:10px 0;
    border-left:1px solid lightgrey;
    border-right:1px solid lightgrey;
    border-bottom:1px solid lightgrey;
}

a:hover {
    color:darkblue;
}

.btn-group-xs > .btn, .btn-xs {
    padding  : 8px 5px;
    width: 147px;
    /*padding  : .5rem .5rem;*/
    font-size  : .8rem;
    line-height  : .65;
    border-radius : .2rem;
}


/*Lightbox tweaking. Do not remove.*/
.lb-dataContainer {
    background-color:white;
    /*min-height:400px;*/
}
    .lb-caption {

        color:black;
    }
    .lb-closeContainer {
        color: black;
    }

/*.litebox-overlay .litebox-close{*/
/*    width: 36px;*/
/*    height: 36px;*/
/*    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAABGdBT&hellip;vNcsmRuX4vc8d6dD9cGMVFL231VGoNUdfFRq2y/t8SS7NvNfRFXoyOLJ8AAAAASUVORK5CYII=) no-repeat center;*/
/*    top: 20px;*/
/*    right: 20px;*/
/*}*/

/* Styles for curate links */
.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: 120px;
    background-color: black;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;

    /* Position the tooltip */
    position: absolute;
    z-index: 1;
    top: 100%;
    left: 50%;
    margin-left: -60px;
}

.tooltip:hover .tooltiptext {
    visibility: visible;
}

</style>

<div style="width:95%;margin:0 auto;padding:0;">
    {% include 'common/detail-nav.html' %}

    <!-- Main -->
    <div class="tab-content clearfix p-2">
        <!--Author list-->
        <div  class="p-2 justify-content-center align-items-center">
        {% if msg %}<span style="text-align:center; color: red">{{msg}}</span>{% endif %}
        {% if user.tier.tier > 2 %}
            <a class="btn btn-xs mybtn btn-outline-primary" href="{% url 'common:curate_newapproved' %}?family={{family}}" rel="nofollow noreferrer noopener">Recently approved</a>
            <a class="btn btn-xs mybtn btn-outline-primary" href="{% url 'common:curate_pending' %}?family={{family}}&gen=&type={{species.type}}" rel="nofollow noreferrer noopener">All pending photos</a>
            <a class="btn btn-xs mybtn btn-outline-primary" href="{% url 'common:curate_newupload' %}?family={{family}}&gen=&type={{species.type}}" rel="nofollow noreferrer noopener">New uploaded photos</a>
        {% endif %}
<!--        {% if user.tier.tier > 1 %}-->
<!--            <a class="btn btn-xs mybtn btn-outline-primary" href="{% url 'common:myphoto_browse_spc' %}?family={{species.gen.family}}&role={{role}}">My Species Photos</a>-->
<!--            <a class="btn btn-xs mybtn btn-outline-primary" href="{% url 'common:myphoto_browse_hyb' %}?family={{species.gen.family}}&role={{role}}">My Hybrid Photos</a>-->
<!--        {% endif %}-->
            &nbsp;&nbsp;
        {% if user.is_authenticated %}
            {% if owner == 'Y' %}
                <a href="{% url 'display:photos' species.pid %}?family={{family}}&role={{role}}&owner=N" rel="nofollow noreferrer noopener">Click to view all {{species.binomial_it|safe}} photos</a>
            {%  else %}
                <a href="{% url 'common:myphoto' species.pid %}?family={{family}}&role={{role}}&owner=Y" rel="nofollow noreferrer noopener">Click to view only my photos</a>
            {% endif %}
        {% endif %}
<!--                <form action="?" style="display:inline-block; margin-top: 5px;">-->
<!--                    <input type="hidden" name="family" value="{{family.family}}" >-->
<!--                    {% if owner == 'Y' %}-->
<!--                    <input type="checkbox" class="form-check-input" name="owner" value="N" checked onchange="this.form.submit()" style="margin:10px 0 0 0;">-->
<!--                    <span style="margin:0 30px;font-size:13px;">My own photos</span>-->
<!--                    {% else %}-->
<!--                    <input type="checkbox" class="form-check-input" name="owner" value="Y" onchange="this.form.submit()" style="margin:10px 0 0 0;">-->
<!--                    <span style="margin:0 30px;font-size:13px;">All {{species.binomial_it|safe}} photos</span>-->
<!--                    {% endif %}-->
<!--                </form>-->
        </div>


<!--            Main section-->
            <div class="d-flex flex-wrap justify-content-center align-items-center p-2">
        {% if public_list or private_list or upload_list %}
            {% for image in upload_list %}
                {% if role == 'cur' or user.photographer.author_id == image.author.author_id %}
                <div class="{% if role == 'cur' %}imageitem-cur{% else %}imageitem{% endif %} p-1 justify-content-center align-items-center">
                     {% if image.image_file_path %}
                         <div class="box" style="background-color: #f19292">
                             <a target="_blank" href="{% static 'media/' %}{{image.image_file_path}}" data-lightbox="media" data-title="
                                  {{image.id}}: {{image.imgname}}
                                  <br>{{image.get_displayname}}
                                  <br>{{image.text_data|default:''|safe}}" rel="nofollow noreferrer noopener">
                                  <img class="thumbnails" alt="{{image.get_displayname}}" src="{% static 'media/' %}{{image.image_file_path}}">
                                  <div class="text text-br">{{image.id}}
                                  </div>
                             </a>
                             </div>
                     {% else %}
                         <div class="box">
                             <a href="#">
                                <img class="thumbnails" alt="{{image.get_displayname}}" src="{{image.image_url}}" class="img-fluid" style="width:100%;">
                                <div class="text text-br">{{image.id}}
                                </div>
                             </a>
                         </div>
<!--                        Requested file does not exist-->
                     {% endif %}
                     <br>
                     <div style="font-size:10px">
                        <a href="{{image.source_url}}" rel="nofollow noreferrer noopener">{{image.get_displayname}}</a>
<!--                            Private and curate role may delete photos-->
                        {% if role == "cur" or image.author.author_id == user.photographer.author_id %}
                         <br>
                            {% if image.approved %}
                                <b>Approved</b>
                            {% elif role == 'cur' %}
                                {% if family.family == 'Orchidaceae' %}
                                    <a href="{% url 'orchidaceae:approvemediaphoto' image.pid.pid %}?id={{image.id}}&gen={{species.gen.pid}}&action=file" rel="nofollow noreferrer noopener">Approve</a> |
                                {% else %}
                                    <a href="{% url 'common:approvemediaphoto' image.pid.pid %}?family={{species.gen.family}}&id={{image.id}}&gen={{species.gen.pid}}&action=file" rel="nofollow noreferrer noopener">Approve</a> |
                                {% endif %}
                            {% endif %}
                            <a href="{% url 'common:deletephoto' image.id image.pid.pid %}?app={{species.family.application}}&role={{role}}&next=photos" rel="nofollow noreferrer noopener" >Delete</a>
                        {% endif %}
                     </div>

                 </div>
                {% endif %}
            {% endfor %}

            {% for image in public_list %}
                <div class="{% if role == 'cur' %}imageitem-cur{% else %}imageitem{% endif %}">
                    <div class="box">
                        <a href="{% static image.image_dir %}{{image.image_file}}" data-lightbox="public" data-title="
                                {{image.id}}:  Uploaded since {{image.created_date}}<br>
                                {{image.get_displayname}}
                                <br>{{image.text_data|default:''|safe}}">
                                    <img class="thumbnails" alt="{{image.binomial}}" src="{% if image.image_file %}{% static image.thumb_dir %}{{image.image_file}}{% else %}{{image.image_url}}{% endif %}">
                                    <div class="text text-br">{{image.id}}</div>
                        </a>
                    </div>
                    <div class="{% if role == 'cur' %}imgcaption-cur{% else %}imgcaption{% endif %}">
                        <div style="width:100%;word-wrap: break-word;">
                            {{image.binomial_it|safe}}
                            {{image.imginfo|default:''}}
                            <br>
                            {% if image.source_url %}
                                <a href="{{image.source_url}}" target="_blank">{{image.get_displayname }}</a>
                            {% else %}
                                {{image.get_displayname }}
                            {% endif %}
                            {% if role == 'cur' %}
                                {% include 'common/curate_links.html' %}
                            {% endif %}
                         </div>
                    </div>
                </div>
            {% endfor %}

            {% for image in private_list %}
                {% if role == 'cur' or image.author == user.photographer.author_id %}
                    <div class="{% if role == 'cur' %}imageitem-cur{% else %}imageitem{% endif %}">
                        {% if image.image_file %}
                            <div class="box" style="background-color: #f19292">
                                <a href="{% static image.image_dir %}{{image.image_file}}" data-lightbox="private" data-title="
                                    <h6><small>
                                    {{image.id}}:  Uploaded since {{image.created_date}}<br>
                                    {{image.get_displayname}}
                                    {{image.text_data|default:''|safe}} </small></h6>">
                                        <img class="thumbnails" alt="{{image.binomial}}" src="{% static image.thumb_dir %}{{image.image_file}}">
                                        <div class="text text-br">{{image.id}}</div>
                                </a>
                            </div>
                            <br>
                        {% else %}
                            <div class="box">
                                <a href="#">
                                    <img class="thumbnails" alt="{{image.binomial}}" src="{{image.image_url}}" class="img-fluid">
                                    <div class="text text-br">{{image.id}}
                                    </div>
                                </a>
                            </div>
                        {% endif %}
                        <div class="imgcaption">
                            {% include 'common/curate_links.html' %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}

        {% else %}
            {% if species.status == 'synonym' %}
                <br><br><div style="text-align:center">No images available.  Please try the accepted species
                            <a href="{% url 'display:photos' species.getAcc %}?family={{species.gen.family}}">{{species.getAccepted.binomial|safe}}</a>
                        </div>
            {% else %}
                <br><br><div style="text-align:center">No images available {% if author %}for {{author.displayname}}{% endif %}</div>
            {% endif %}
        {% endif %}
       </div>
    </div>


    {% if msg %}
        <h6>{{msg|default:''}}</h6>
    {% endif %}

</div>





{% endblock %}



